---
title: UE5ã®æ¨™æº–ãƒœãƒ¼ãƒ³æ§‹é€ ã¨ã¯
emoji: ğŸ‘€
type: tech
topics: ['UE5']
published: true
published_at: 2024-10-01
---
![thumbnail](/images/articles/bb1859ba6a2df7/samune.png)

## çµè«–
UE5æ¨™æº–ãƒœãƒ¼ãƒ³æ§‹é€ ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚
![UE5æ¨™æº–ãƒœãƒ¼ãƒ³æ§‹é€ ](/images/articles/bb1859ba6a2df7/bone.png)
### è£œè¶³
å‘½åè¦å‰‡ã¨éšå±¤æ§‹é€ ãŒãã‚ã£ã¦ã„ã‚Œã°ã‚ˆã„ã€‚ç‰¹ã«å‘½åè¦å‰‡ãŒå¤§äº‹ã§ãã‚Œã•ãˆå®ˆã‚‰ã‚Œã¦ã„ã‚Œã°UE5æ¨™æº–ã¨åŒç­‰ã«æ‰±ãˆã‚‹ã“ã¨ã‚‚å¤šã„ã€‚

![å¼•ç”¨ï¼šUE5ã§ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æµç”¨æ–¹æ³•ã«ã¤ã„ã¦ã€Compatible Skeletons, IK Retargeterã€‘#20](/images/articles/bb1859ba6a2df7/img5.png)

ã“ã®æ§‹æˆã‚’å®ˆã£ãŸã†ãˆã§ã•ã‚‰ã«ãƒœãƒ¼ãƒ³ã‚’è¿½åŠ ã™ã‚‹åˆ†ã«ã¯å•é¡ŒãŒãªã„ã€‚

![å¼•ç”¨ï¼šUE5ã§ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æµç”¨æ–¹æ³•ã«ã¤ã„ã¦ã€Compatible Skeletons, IK Retargeterã€‘#10](/images/articles/bb1859ba6a2df7/img3.png)

UE5ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã¯ã“ã®æ§‹é€ ã«ã€æ‰‹æŒ‡ã¯ã‚‚ã¡ã‚ã‚“ã€ã²ã­ã‚Šã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ãƒœãƒ¼ãƒ³ãªã©ã„ãã¤ã‹ã®ãƒœãƒ¼ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚æ¨™æº–ãƒœãƒ¼ãƒ³æ§‹é€ ã®æ‹¡å¼µã®å‚è€ƒã«ãªã‚Šã¾ã™ã€‚
## ã¯ã˜ã‚ã«
UE5ã®æ¨™æº–ãƒœãƒ¼ãƒ³æ§‹é€ ã€ã¤ã¾ã‚Šã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã„ã‚‹éŠ€è‰²ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ãƒœãƒ¼ãƒ³æ§‹é€ ã‚’èª¿ã¹ã¦ã¾ã¨ã‚ã¾ã—ãŸã€‚

äººå‹ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’UEã§ç”¨ã„ã‚‹å ´åˆã¯ã“ã®ãƒœãƒ¼ãƒ³æ§‹é€ ã«æº–æ‹ ã—ã¦ãŠãã®ãŒéå¸¸ã«ãŠã™ã™ã‚ã§ã™ã€‚ã‚¢ã‚»ãƒƒãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒãã®ã¾ã¾ä½¿ã„ã¾ã‚ã›ãŸã‚Šã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‹ã‹ã‚ã‚‹ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã¤ã‹ãˆãŸã‚Š...ãªã©åˆ©ç‚¹ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚

ãœã²å‚è€ƒã«ã—ã¦ãã ã•ã„ï¼

ã“ã“ã‹ã‚‰ã¯ã€ã“ã®æƒ…å ±ã®èª¿æŸ»æ–¹æ³•ã‚’è¨˜è¿°ã—ã¦ä¿¡æ†‘åº¦ã‚’ä¸Šã’ã¦ãŠãã¾ã™ã€‚
## èª¿æŸ»æ–¹æ³•
å…¬å¼ãŒã¾ã¨ã‚ã¦ãã‚Œã¦ãªã„ã‹ãªã€ã¨ã²ãŸã™ã‚‰æƒ…å ±ã‚’æ¢ã—æ±‚ã‚ã¦ã„ãŸæ™‚ã€‚ã¿ã¤ã‘ã¾ã—ãŸã€‚
![https://www.docswell.com/s/EpicGamesJapan/KQR34N-ue-meetup-osaka-02#p56](/images/articles/bb1859ba6a2df7/casdfa.png)

ãªã‚“ã¨ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ç›´æ¥æ›¸ãè¾¼ã¾ã‚Œã¦ã„ã‚‹ã ã¨ï¼ï¼Ÿ

è©²å½“éƒ¨åˆ†ã‚’è¦‹ã«è¡Œãã¨ä»¥ä¸‹ã®é€šã‚Šã§ã—ãŸã€‚ã¨ã„ã†ã“ã¨ã§è§£æ±ºã§ã™ã€‚

å‰è¿°ã—ãŸã¨ãŠã‚Šã€ã“ã®æ§‹é€ ã«ãŠã„ã¦é‡è¦ãªã®ã¯éšå±¤æ§‹é€ ã¨å‘½åè¦å‰‡ã§ã™ã€‚ç‰¹ã«åå‰ã‚’å…ƒã«ã—ã¦é§†å‹•ã™ã‚‹UEæ¨™æº–ç”¨æ©Ÿèƒ½ãŒå¤šã„ãŸã‚ã€æœ€æ‚ªåå‰ã•ã›ä¸€è‡´ã•ã›ã¦ãŠã‘ã°å°‘ã—ã®æ‰‹ç›´ã—ã§UEæ¨™æº–ã¨åŒç­‰ã«æ‰±ãˆã‚‹ã¯ãšã§ã™(è²¬ä»»ã¯è² ã„ã¾ã›ã‚“)ã€‚
{{< highlight cpp >}}
// UE5 Mannequin
{
	static FName UE5Name = "UE5 Mannequin";
	static TArray<FName> UE5Bones = {"root", "pelvis", "spine_01", "spine_02", "spine_03", "spine_04", "spine_05", "neck_01", "neck_02", "head", "clavicle_l", "upperarm_l", "lowerarm_l", "hand_l", "index_metacarpal_l", "index_01_l", "index_02_l", "index_03_l", "middle_metacarpal_l", "middle_01_l", "middle_02_l", "middle_03_l", "thumb_01_l", "thumb_02_l", "thumb_03_l", "pinky_metacarpal_l", "pinky_01_l", "pinky_02_l", "pinky_03_l", "ring_metacarpal_l", "ring_01_l", "ring_02_l", "ring_03_l", "clavicle_r", "upperarm_r", "lowerarm_r", "hand_r", "pinky_metacarpal_r", "pinky_01_r", "pinky_02_r", "pinky_03_r", "ring_metacarpal_r", "ring_01_r", "ring_02_r", "ring_03_r", "middle_metacarpal_r", "middle_01_r", "middle_02_r", "middle_03_r", "index_metacarpal_r", "index_01_r", "index_02_r", "index_03_r", "thumb_01_r", "thumb_02_r", "thumb_03_r", "thigh_r", "calf_r", "foot_r", "ball_r", "thigh_l", "calf_l", "foot_l", "ball_l"};
	static TArray<int32> UE5ParentIndices = {-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 6, 10, 11, 12, 13, 14, 15, 16, 13, 18, 19, 20, 13, 22, 23, 13, 25, 26, 27, 13, 29, 30, 31, 6, 33, 34, 35, 36, 37, 38, 39, 36, 41, 42, 43, 36, 45, 46, 47, 36, 49, 50, 51, 36, 53, 54, 1, 56, 57, 58, 1, 60, 61, 62};
	FTemplateHierarchy& UE5 = AddTemplateHierarchy(UE5Name, UE5Bones, UE5ParentIndices); 
	FRetargetDefinition& UE5Retarget = UE5.AutoRetargetDefinition.RetargetDefinition;
	// core
	UE5Retarget.RootBone = FName("pelvis");
	UE5Retarget.AddBoneChain(FCharacterizationStandard::Root, FName("root"), FName("root"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::Spine, FName("spine_01"), FName("spine_02"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::Neck, FName("neck_01"), FName("neck_02"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::Head, FName("head"), FName("head"));
	// left
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftLeg, FName("thigh_l"), FName("ball_l"),FCharacterizationStandard::LeftFootIKGoal);
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftClavicle, FName("clavicle_l"), FName("clavicle_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftArm, FName("upperarm_l"), FName("hand_l"),FCharacterizationStandard::LeftHandIKGoal);
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftIndexMetacarpal, FName("index_metacarpal_l"), FName("index_metacarpal_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftMiddleMetacarpal, FName("middle_metacarpal_l"), FName("middle_metacarpal_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftRingMetacarpal, FName("ring_metacarpal_l"), FName("ring_metacarpal_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftPinkyMetacarpal, FName("pinky_metacarpal_l"), FName("pinky_metacarpal_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftThumb, FName("thumb_01_l"), FName("thumb_03_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftIndex, FName("index_01_l"), FName("index_03_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftMiddle, FName("middle_01_l"), FName("middle_03_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftRing, FName("ring_01_l"), FName("ring_03_l"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::LeftPinky, FName("pinky_01_l"), FName("pinky_03_l"));
	// right
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightLeg, FName("thigh_r"), FName("ball_r"),FCharacterizationStandard::RightFootIKGoal);
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightClavicle, FName("clavicle_r"), FName("clavicle_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightArm, FName("upperarm_r"), FName("hand_r"),FCharacterizationStandard::RightHandIKGoal);
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightIndexMetacarpal, FName("index_metacarpal_r"), FName("index_metacarpal_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightMiddleMetacarpal, FName("middle_metacarpal_r"), FName("middle_metacarpal_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightRingMetacarpal, FName("ring_metacarpal_r"), FName("ring_metacarpal_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightPinkyMetacarpal, FName("pinky_metacarpal_r"), FName("pinky_metacarpal_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightThumb, FName("thumb_01_r"), FName("thumb_03_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightIndex, FName("index_01_r"), FName("index_03_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightMiddle, FName("middle_01_r"), FName("middle_03_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightRing, FName("ring_01_r"), FName("ring_03_r"));
	UE5Retarget.AddBoneChain(FCharacterizationStandard::RightPinky, FName("pinky_01_r"), FName("pinky_03_r"));
	// bone settings for IK
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetRotationStiffness(FName("pelvis"), FCharacterizationStandard::PelvisRotationStiffness);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetRotationStiffness(FName("clavicle_l"), FCharacterizationStandard::ClavicleRotationStiffness);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetRotationStiffness(FName("clavicle_r"), FCharacterizationStandard::ClavicleRotationStiffness);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetRotationStiffness(FName("foot_l"), FCharacterizationStandard::FootRotationStiffness);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetRotationStiffness(FName("foot_r"), FCharacterizationStandard::FootRotationStiffness);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetPreferredAxis(FName("calf_l"), EPreferredAxis::PositiveZ);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetPreferredAxis(FName("calf_r"), EPreferredAxis::PositiveZ);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetPreferredAxis(FName("lowerarm_l"), EPreferredAxis::PositiveZ);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetPreferredAxis(FName("lowerarm_r"), EPreferredAxis::PositiveZ);
	UE5.AutoRetargetDefinition.BoneSettingsForIK.SetExcluded(FName("spine_05"), true);
	// unreal ik bones
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_foot_root", "root");
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_foot_l", "foot_l");
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_foot_r", "foot_r");
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_hand_root", "root");
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_hand_gun", "hand_r");
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_hand_l", "hand_l");
	UE5.AutoRetargetDefinition.BonesToPin.AddBoneToPin("ik_hand_r", "hand_r");
	// exclude feet from auto-pose
	UE5.AutoRetargetDefinition.BonesToExcludeFromAutoPose.Add("foot_l");
	UE5.AutoRetargetDefinition.BonesToExcludeFromAutoPose.Add("foot_r");
}
```
## ãŠã‚ã‚Šã«
ã‚ãã‚‰ã‹ã«å­˜åœ¨ã™ã‚‹ã€ã¨ã„ã†ã‹çŸ¥ã£ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦åˆ©ç”¨ã§ãã‚‹æ©Ÿèƒ½ã‚‚å¤šã€…ã‚ã‚‹ã®ã«ã€ŒUE5æ¨™æº–ã®ãƒœãƒ¼ãƒ³æ§‹é€ ã¯ã“ã‚Œï¼ã€ã¨ã„ã†è¨˜äº‹ãŒä¸€ã¤ã‚‚å¼•ã£æ›ã‹ã‚Šã¾ã›ã‚“ã€‚

ã“ã‚Œã¯ç”±ã€…ã—ãäº‹æ…‹ã§ã™ã‚ˆï¼

ã¨ã„ã†ã“ã¨ã§ã¾ã¨ã‚ã¦ãŠãã¾ã—ãŸã€‚å®Ÿç‰©ã‚’è¦‹ã«è¡Œã‘ã°ã„ã„ã£ã¦ã€ãã‚Œã¯åˆå¿ƒè€…ã«ã¯é…·ã ã‚ˆï½

UEå…¬å¼ã¯ãœã²æ—¥æœ¬èªã§æ¨™æº–ãƒœãƒ¼ãƒ³æ§‹é€ ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ãã‚Œã‚‹ã¨ã†ã‚Œã—ã„ãªã
## å‚è€ƒè³‡æ–™
- [UE5ã§ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æµç”¨æ–¹æ³•ã«ã¤ã„ã¦ã€Compatible Skeletons, IK Retargeterã€‘](https://www.docswell.com/s/EpicGamesJapan/KQN3EK-UE5-ShareAnimation)
- [Unreal Engine 5.4ã€ã‚ã®æ–°æ©Ÿèƒ½ã‚’è¿½ãˆï¼](https://www.docswell.com/s/EpicGamesJapan/KQR34N-ue-meetup-osaka-02)